<!DOCTYPE html>
<html lang="ko">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>로그인 페이지</title>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
</head>
<body>
    <h1>로그인 페이지</h1>
    <form>
        <label>이메일</label>
        <input type="text" name="email" class="email"/><br />

        <label>비밀번호</label>
        <input type="password" name="passwd" class="passwd"/><br />

        <button type="button" class="btn">로그인</button>
    </form>

    <script>
        let btn = document.querySelector(".btn");

        btn.addEventListener('click', function (e) {
            e.preventDefault();

            let obj = {
                email: document.querySelector(".email").value,
                passwd: $(".passwd").val()
            };

            $.ajax({
                type: "post",
                url: "/login",
                dataType: "json",
                data: obj,
                success: function (res) {
                    if(res.msg == "failure") {
                        alert("가입된 정보가 없습니다.");

                    }else {
                        location.href = "/main";
                    }
                }
            });

        });
    </script>

</body>
</html>